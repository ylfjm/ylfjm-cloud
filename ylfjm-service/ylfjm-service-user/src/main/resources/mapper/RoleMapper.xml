<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.github.ylfjm.user.mapper.RoleMapper">

    <select id="page" resultType="com.github.ylfjm.user.po.Role">
        select
        r.id,
        r.`name`,
        r.creator,
        r.create_time,
        r.updater,
        r.update_time,
        (select count(distinct admin_id) from system_admin__role where role_id = r.id) as accountCount
        from system_role r
        where r.sys_type = #{sysType}
        <if test="name!=null and name!=''">
            and r.`name` like CONCAT('%', #{name}, '%')
        </if>
    </select>

</mapper>
